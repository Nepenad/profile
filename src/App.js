import React, {
  forwardRef,
  Fragment,
  useEffect,
  useImperativeHandle,
  useRef,
} from "react";
import gsap from "gsap";
import { Timeline, Tween } from "react-gsap";

const App = forwardRef((props, ref) => {
  const text1 = useRef();
  const text2 = useRef();
  useImperativeHandle(ref, () => ({
    ...text1.current,
    ...text2.current,
  }));

  // const q = gsap.utils.selector(el);
  // const tl = useRef();

  // const tl = gsap.timeline({ duration: 1, ease: "power2.inOut" });

  // useEffect(() => {
  //   tl.to(".text", {
  //     drawSVG: "0",
  //   });
  // });

  // useEffect(() => {
  //   var shapes = "rect, circle, ellipse, polyline";
  //   tl.current = gsap
  //     .timeline({ repeat: 1, yoyo: true })
  //     .fromTo(
  //       shapes,
  //       { drawSVG: "100%" },
  //       { duration: 1, drawSVG: "50% 50%", stagger: 0.1 }
  //     )
  //     .fromTo(
  //       shapes,
  //       { drawSVG: "0%" },
  //       { duration: 0.1, drawSVG: "10%", immediateRender: false },
  //       "+=0.1"
  //     )
  //     .to(shapes, { duration: 1, drawSVG: "90% 100%", stagger: 0.5 })
  //     .to(shapes, {
  //       duration: 1,
  //       rotation: 360,
  //       scale: 0.5,
  //       drawSVG: "100%",
  //       stroke: "white",
  //       strokeWidth: 6,
  //       transformOrigin: "50% 50%",
  //     })
  //     .to(shapes, {
  //       duration: 0.5,
  //       stroke: "red",
  //       scale: 1.5,
  //       opacity: 0,
  //       stagger: 0.2,
  //     });
  // }, []);

  return (
    <div className="app">
      <div className="loader flex items-center justify-center text-center h-screen">
        <Timeline
          target={
            <Fragment>
              <div className="loader__bg absolute inset-0 bg-black"></div>
              <div className="loader__wrapper h-36">
                <div className="loader__text--1 relative overflow-hidden">
                  <h2 className="relative text-white" ref={text1}>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="130"
                      height="120"
                      viewBox="0 0 159.2 99.9"
                    >
                      <Tween
                        from={{
                          svgDraw: [0, 0.5],
                        }}
                        to={{
                          svgDraw: [1, 0],
                        }}
                        duration={2}
                      >
                        <path
                          ref={text1}
                          fill="none"
                          fillRule="evenodd"
                          stroke="#fff"
                          strokeLinecap="round"
                          strokeWidth="2"
                          d="M68.6 4.6l5.8.7a250.129 250.129 0 01-1.526 6.223q-.709 2.748-1.54 5.755a455.995 455.995 0 01-1.784 6.272q-2.728 9.348-5.017 15.495A112.084 112.084 0 0164 40.45q-2.5 6.45-5.45 12.8a55.797 55.797 0 01-2.262 4.383q-1.203 2.085-2.46 3.758A26.561 26.561 0 0152.3 63.25a16.57 16.57 0 01-1.79 1.723q-.992.811-1.966 1.281a6.052 6.052 0 01-2.644.646 6.556 6.556 0 01-1.847-.244A4.649 4.649 0 0141.35 64.6a6.854 6.854 0 01-.717-1.626q-.532-1.717-.678-4.38a39.33 39.33 0 01-.055-2.144 76.337 76.337 0 01.081-3.176q.291-6.775 1.619-21.424a5987.094 5987.094 0 00.399-4.42q1.307-14.536 1.351-15.98a5.701 5.701 0 00.002-.127Q43.364 9.8 42.5 9.8q-1.1 0-2.6 3.05a1633.333 1633.333 0 01-.706 1.435Q38.2 16.3 37.6 17.5a184.557 184.557 0 00-.929 2.113q-1.124 2.601-1.619 4.031a17.343 17.343 0 00-.152.456q-5.6 12.6-10 20.8-4.4 8.2-10.1 15.2a19.642 19.642 0 01-1.864 1.929Q11.326 63.496 9.1 65a47.459 47.459 0 01-3.142 1.958q-1.591.903-3.077 1.555a26.94 26.94 0 01-.681.287L0 62.9a33.505 33.505 0 009.292-5.972A45.962 45.962 0 0015 50.75q6.7-8.65 13.85-24.15a833.707 833.707 0 013.129-6.711q3.913-8.287 6.213-12.552A71.007 71.007 0 0139.1 5.7a22.505 22.505 0 011.644-2.356Q42.677.949 44.639.27A4.742 4.742 0 0146.2 0q2.3 0 3.6 1.6a5.634 5.634 0 011.115 2.363A8.187 8.187 0 0151.1 5.75a28.726 28.726 0 01-.062 1.517q-.217 3.678-1.206 14.382a2353.963 2353.963 0 01-.482 5.151 1141.559 1141.559 0 00-.595 6.47q-1.112 12.519-1.153 16.902a34.631 34.631 0 00-.002.328 94.424 94.424 0 00.022 2.101q.076 3.438.428 4.649a3.731 3.731 0 00.237.623q.157.315.359.523a1.279 1.279 0 00.954.404 1.671 1.671 0 00.917-.308q.953-.625 1.991-2.522a18.074 18.074 0 00.092-.17 63.116 63.116 0 002.646-6.107q3.94-10.289 9.665-31.22A1079.518 1079.518 0 0068.6 4.6zm58.6 59.6l2.4-4.3q4.949.667 6.366.699a5.948 5.948 0 00.134.001 9.802 9.802 0 005.383-1.675q1.525-.983 2.986-2.544A24.308 24.308 0 00146.2 54.3a25.85 25.85 0 003.118-5.344A19.188 19.188 0 00150.9 41.4a7.083 7.083 0 00-.268-1.991 5.61 5.61 0 00-1.182-2.159 4.711 4.711 0 00-3.431-1.642 6.172 6.172 0 00-.319-.008 8.012 8.012 0 00-3.765 1.045q-2.898 1.543-6.136 5.367a51.565 51.565 0 00-2.549 3.288 99.028 99.028 0 00-5.909 9.378q-2.766 4.95-5.372 10.728a174.422 174.422 0 00-1.719 3.944Q114.2 83.7 109.7 99.9l-6-2.1a19.976 19.976 0 01.102-.293q.464-1.305 2.805-7.74a10331.706 10331.706 0 01.843-2.317Q111 77.7 114.4 68.1a1567.96 1567.96 0 002.203-6.226q7.1-20.21 7.196-22.611a1.568 1.568 0 00.001-.063 27.211 27.211 0 00-.965-7.354A23.788 23.788 0 00121.2 27.6l5-2.5a16.952 16.952 0 012.313 4.377 14.218 14.218 0 01.787 4.673 33.177 33.177 0 01-.176 3.234q-.324 3.28-1.243 7.702a128.628 128.628 0 01-.481 2.214q7.6-11.4 13.2-15.55a31.118 31.118 0 013.039-2.006q3.438-1.969 6.265-2.13a8.764 8.764 0 01.496-.014 11.088 11.088 0 012.663.302 7.434 7.434 0 013.837 2.248 8.846 8.846 0 012.205 4.922 11.958 11.958 0 01.095 1.528 29.313 29.313 0 01-5.517 17.051 38.393 38.393 0 01-2.233 2.899 31.043 31.043 0 01-5.296 5.02A20.162 20.162 0 01134 65.7q-2.946 0-5.047-.704a8.878 8.878 0 01-1.753-.796zm-24.8-10.3l2.3 1.8a22.525 22.525 0 01-5.35 5.227 28.655 28.655 0 01-3.15 1.923 26.403 26.403 0 01-4.914 2.022 19.863 19.863 0 01-5.586.828 14.071 14.071 0 01-3.612-.439A10.253 10.253 0 0177.5 62.7a10.03 10.03 0 01-2.991-6.129A13.951 13.951 0 0174.4 54.8q0-9.2 9.75-18.1a41.631 41.631 0 016.579-4.975Q97.259 27.8 103.9 27.8a12.291 12.291 0 012.409.215q3.77.757 4.149 4.186a7.282 7.282 0 01.042.799 9.575 9.575 0 01-1.237 4.574q-1.616 2.999-5.341 6.028a36.171 36.171 0 01-.372.298Q96.6 49.4 84 53.9a7.998 7.998 0 001.421 2.379A7.31 7.31 0 0086.8 57.5a7.846 7.846 0 001.796.931 6.232 6.232 0 002.104.369 10.611 10.611 0 002.826-.432q2.739-.763 6.331-2.874A56.342 56.342 0 00102.4 53.9zm-18.9-3q8.1-2.8 13.9-7 4.23-3.063 5.375-5.754a4.952 4.952 0 00.425-1.946 3.105 3.105 0 00-.821-2.11 4.147 4.147 0 00-.179-.19 3.56 3.56 0 00-.95-.692 3.03 3.03 0 00-1.35-.308q-4.7 0-10.15 5.85a28.277 28.277 0 00-3.52 4.592q-1.959 3.233-2.58 6.595a17.341 17.341 0 00-.15.963z"
                          fontSize="1"
                          vectorEffect="non-scaling-stroke"
                        ></path>
                      </Tween>
                    </svg>
                  </h2>
                </div>
                <div className="loader__text--2 relative overflow-hidden">
                  <h2 className="text-white ml-14" ref={text2}>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="210"
                      height="70"
                      viewBox="0 0 219.7 86.7"
                    >
                      <Tween
                        from={{
                          svgDraw: [0, 0.5],
                        }}
                        to={{
                          svgDraw: [1, 0],
                        }}
                        duration={2}
                      >
                        <path
                          ref={text2}
                          fill="none"
                          fillRule="evenodd"
                          stroke="#fff"
                          strokeLinecap="round"
                          strokeWidth="2"
                          d="M31.2 32.8v-3.4a1.499 1.499 0 00.135-.015q.765-.104 5.665-.935a31.659 31.659 0 004.565-1.109q2.72-.891 4.885-2.241a12.552 12.552 0 001.729-1.277Q50.3 21.927 50.3 19.7a3.296 3.296 0 00-.521-1.889q-.87-1.288-3.196-1.607A12.465 12.465 0 0044.9 16.1a21.361 21.361 0 00-11.126 3.175A27.74 27.74 0 0031.1 21.1a24.191 24.191 0 00-3.069 2.772Q24.6 27.604 24.6 31.6a6.544 6.544 0 00.976 3.608q1.601 2.498 5.824 3.492a14.776 14.776 0 01.668.194q.932.296 1.315.592a1.355 1.355 0 01.017.014 1.173 1.173 0 01.351.486q.081.201.118.455a3.194 3.194 0 01.031.459 1.84 1.84 0 01-.645 1.411 2.819 2.819 0 01-.305.239 5.198 5.198 0 01-.533.311q-1.161.602-3.817 1.539-9.317 3.19-13.916 8.175A16.301 16.301 0 0010.2 64a12.231 12.231 0 00.165 2.062q.241 1.41.835 2.538a44.745 44.745 0 0112.289-10.761A53.486 53.486 0 0127 55.9a49.149 49.149 0 018.647-3.435A36.506 36.506 0 0145.7 51a17.546 17.546 0 013.007.242q1.66.289 3 .923a9.123 9.123 0 011.493.885 6.504 6.504 0 012.751 4.721A8.526 8.526 0 0156 58.7a13.309 13.309 0 01-1.425 5.862q-.932 1.919-2.474 3.837A27.938 27.938 0 0150.8 69.9a35.742 35.742 0 01-7.691 6.199 46.338 46.338 0 01-5.759 2.951 43.587 43.587 0 01-10.529 3.092 38.071 38.071 0 01-5.871.458 35.906 35.906 0 01-4.977-.323Q11.258 81.616 8.1 79.6q-.097.097-.86 1.43a136.041 136.041 0 00-.04.07q-1.579 3.159-2.785 4.821a10.937 10.937 0 01-.615.779L.5 85.3q.7-2.8 4.1-8.5a18.689 18.689 0 01-3.432-5.467A16.556 16.556 0 010 65.15a16.39 16.39 0 012.261-8.207A23.706 23.706 0 015.25 52.85Q10.5 47 19.9 43.2q-2.899-2.405-4.01-4.925a7.803 7.803 0 01-.69-3.175 12.305 12.305 0 011.297-5.353q.886-1.848 2.378-3.722A29.717 29.717 0 0121.2 23.45q6-5.95 14.65-9.65 8.346-3.57 15.714-3.695a31.453 31.453 0 01.536-.005 14.856 14.856 0 012.615.216q1.463.262 2.636.841a7.813 7.813 0 011.149.693q2.357 1.718 2.399 4.545a6.936 6.936 0 01.001.105 10.496 10.496 0 010 .078q-.025 3.405-2.261 6.298A15.762 15.762 0 0156.15 25.4q-4.75 3.9-10.9 5.7-6.15 1.8-11.85 1.8a36.544 36.544 0 01-.7-.006q-.702-.014-1.17-.056a6.537 6.537 0 01-.33-.038zM214.6 0l5.1 1.8-1.4 2.6a423.054 423.054 0 00-12.461 25.117A354.6 354.6 0 00199.6 44.1a125.167 125.167 0 00-2.231 5.906Q194.5 58.275 194.5 63a5.189 5.189 0 00.101 1.055q.184.883.699 1.495.677.804 2.033.927a5.688 5.688 0 00.517.023q1.545 0 3.52-1.793a15.317 15.317 0 00.53-.507l1.8 1.7a12.008 12.008 0 01-1.917 2.954q-.948 1.092-2.214 2.107a20.911 20.911 0 01-.369.289 14.477 14.477 0 01-2.176 1.395q-1.317.676-2.598.919A7.641 7.641 0 01193 73.7a7.018 7.018 0 01-2.469-.399Q187.2 72.053 187.2 66.9a22.011 22.011 0 01.165-2.509q.299-2.578 1.145-6.223a118.357 118.357 0 01.89-3.568q-11.8 20.6-23.1 20.6-3.9 0-6.2-2.4a8.027 8.027 0 01-2.025-3.868 11.91 11.91 0 01-.275-2.632q0-5.7 3.999-11.785A36.443 36.443 0 01163 52.8q5.2-7 12.8-11.45a38.222 38.222 0 015.56-2.712Q185.875 36.9 190 36.9l.3 3.5a29.072 29.072 0 00-12.494 4.762 37.072 37.072 0 00-3.556 2.688 30.077 30.077 0 00-3.601 3.592q-1.744 2.091-2.698 4.208a12.439 12.439 0 00-1.151 5.15q0 2.8 1.5 4.45a4.962 4.962 0 003.585 1.643 6.73 6.73 0 00.315.007 6.607 6.607 0 002.994-.831q3.729-1.917 8.723-8.26A81.253 81.253 0 00185 56.4a42.946 42.946 0 001.896-2.717q2.176-3.364 4.754-8.383a3619.379 3619.379 0 001.781-3.472q2.176-4.246 3.728-7.308a1044.019 1044.019 0 00.491-.97l4.4-8.7a4018.231 4018.231 0 001.16-2.294q1.603-3.174 3.767-7.47a13096.451 13096.451 0 00.723-1.436Q211.2 6.7 214.6 0zM106.8 61.8l2.1 1.6q-2.2 4.4-6.05 7.4a19.961 19.961 0 01-2.22 1.517Q98.08 73.8 95.9 73.8a8.624 8.624 0 01-2.06-.232A5.927 5.927 0 0191 72a6.072 6.072 0 01-1.798-4.327 7.973 7.973 0 01-.002-.173 7.124 7.124 0 01.203-1.545q.633-2.79 3.247-7.905 3.45-6.75 3.45-9.95a3.325 3.325 0 00-.674-1.997 4.685 4.685 0 00-.476-.553 3.848 3.848 0 00-1.519-.958A3.889 3.889 0 0092.2 44.4q-5.1 0-10.3 7.75a83.727 83.727 0 00-3.367 5.513q-3.294 5.843-7.007 14.078A289.273 289.273 0 0070.3 74.5l-6-2.1q1.9-11.6 5.45-22.65 2.813-8.756 5.281-13.587A30.224 30.224 0 0176.3 33.9l4.1 1.3a77.225 77.225 0 00-1.494 4.194q-2.368 7.217-5.571 20.165a631.539 631.539 0 00-.035.141 115.293 115.293 0 015.724-8.906Q89.306 36.437 98.28 36.108a11.469 11.469 0 01.42-.008 6.037 6.037 0 012.157.374 5.449 5.449 0 011.993 1.326q1.65 1.7 1.65 4a15.191 15.191 0 01-.164 2.285 11.783 11.783 0 01-.436 1.865 16.512 16.512 0 01-.314.866q-.876 2.25-3.436 7.734a122.246 122.246 0 00-1.07 2.354Q97.017 61.58 97 62.977A1.89 1.89 0 0097 63a4.655 4.655 0 00.118 1.08A3.103 3.103 0 0098 65.65a4.876 4.876 0 00.57.47q.313.217.615.336a1.945 1.945 0 00.715.144 4.48 4.48 0 00.633-.042q.338-.049.621-.152a2.383 2.383 0 00.246-.106 5.575 5.575 0 00.471-.267q.25-.157.522-.358a11.663 11.663 0 00.357-.275q.75-.6 1.35-1.1.6-.5 1.45-1.35.85-.85 1.25-1.15zm47.4 2l2.3 1.7a11.552 11.552 0 01-1.675 2.568q-.896 1.059-2.112 2.077a23.692 23.692 0 01-1.363 1.055 19.014 19.014 0 01-2.28 1.424q-2.439 1.276-4.57 1.276-4.706 0-5.658-3.944a9.634 9.634 0 01-.242-2.256 14.085 14.085 0 01.229-2.433q.357-2.029 1.271-4.467l-3.7 3.8q-4.965 5.057-8.704 7.07a15.896 15.896 0 01-.646.33 19.914 19.914 0 01-4.094 1.468 16.012 16.012 0 01-3.656.432q-3.8 0-5.75-2.15a7.138 7.138 0 01-1.577-2.941q-.373-1.346-.373-3.009 0-7 5.4-13.85a40.456 40.456 0 0111.731-10.026A47.555 47.555 0 01130.8 40.8q8.4-4.3 16.8-4.4l.2 3.3-4.2.9q-9.1 2-16.05 8-4.07 3.514-5.757 7.01a11.287 11.287 0 00-1.193 4.94 10.83 10.83 0 00.198 2.172q.777 3.778 4.602 3.778 3.772 0 9.019-4.426A45.684 45.684 0 00136.5 60.2q6.6-6.3 11-14.8l4.2 2.5a204.847 204.847 0 00-2.107 4.368q-3.029 6.491-3.817 9.691a8.047 8.047 0 00-.276 1.841 3.397 3.397 0 00.245 1.306 3.184 3.184 0 00.705 1.044 4.283 4.283 0 00.579.491q.661.459 1.321.459a14.274 14.274 0 00.385-.005q.547-.015.796-.075a.879.879 0 00.069-.02 4.556 4.556 0 00.563-.231 5.003 5.003 0 00.037-.019q.294-.147.73-.437a13.889 13.889 0 00.02-.013q.45-.3.8-.6.337-.289 1.091-.856a64.698 64.698 0 01.059-.044 87.043 87.043 0 00.381-.287q.544-.413.919-.713zM39.9 57a19.266 19.266 0 00-4.907.687q-2.267.598-4.761 1.718A46.723 46.723 0 0026.15 61.5a48.033 48.033 0 00-7.849 5.558A39.215 39.215 0 0013.4 72.2a13.009 13.009 0 007.182 4.082 19.676 19.676 0 004.168.418q7.35 0 14.4-4.75a24.696 24.696 0 003.167-2.499Q46.2 65.782 46.2 61.7a4.551 4.551 0 00-.28-1.629 4.006 4.006 0 00-1.42-1.821q-1.426-1.049-3.696-1.218A12.179 12.179 0 0039.9 57z"
                          fontSize="12"
                          vectorEffect="non-scaling-stroke"
                        ></path>
                      </Tween>
                    </svg>
                  </h2>
                </div>
              </div>
            </Fragment>
          }
        >
          <Tween to={{ opacity: 0 }} target={1} />
          <Tween
            from={{
              svgDraw: [0, 0.5],
            }}
            to={{
              svgDraw: [1, 0],
            }}
            duration={2}
          ></Tween>
        </Timeline>
      </div>
    </div>
  );
});

export default App;
